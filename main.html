<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Click and Drag</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      background-color: #f5f5f5;
    }

    .items {
      width: 320px;
      height: 320px;
      display: flex;
      flex-wrap: wrap;
      position: relative;
      background: white;
      border: 2px solid #333;
      padding: 5px;
    }

    .item {
      width: 60px;
      height: 60px;
      display: flex;
      justify-content: center;
      align-items: center;
      background: lightblue;
      border: 1px solid #000;
      cursor: grab;
      position: absolute;
      user-select: none;
    }

    .item:active {
      cursor: grabbing;
    }
  </style>
</head>
<body>

  <div class="items"></div>

  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const container = document.querySelector(".items");

      // Create and append cubes dynamically
      for (let i = 1; i <= 25; i++) {
        const div = document.createElement("div");
        div.classList.add("item");
        div.textContent = i;
        div.style.left = `${(i - 1) % 5 * 62}px`; // 60px width + 2px border
        div.style.top = `${Math.floor((i - 1) / 5) * 62}px`; // 60px height + 2px border
        container.appendChild(div);
      }

      let selectedItem = null;
      let offsetX = 0, offsetY = 0;

      document.addEventListener("mousedown", function (event) {
        if (event.target.classList.contains("item")) {
          selectedItem = event.target;

          const containerRect = container.getBoundingClientRect();
          const itemRect = selectedItem.getBoundingClientRect();

          offsetX = event.clientX - itemRect.left;
          offsetY = event.clientY - itemRect.top;

          selectedItem.style.zIndex = "1000";
          event.preventDefault(); // Prevents text selection
        }
      });

      document.addEventListener("mousemove", function (event) {
        if (!selectedItem) return;

        let containerRect = container.getBoundingClientRect();
        let x = event.clientX - offsetX - containerRect.left;
        let y = event.clientY - offsetY - containerRect.top;

        let maxX = containerRect.width - selectedItem.offsetWidth;
        let maxY = containerRect.height - selectedItem.offsetHeight;

        if (x < 0) x = 0;
        if (y < 0) y = 0;
        if (x > maxX) x = maxX;
        if (y > maxY) y = maxY;

        selectedItem.style.left = `${x}px`;
        selectedItem.style.top = `${y}px`;
      });

      document.addEventListener("mouseup", function () {
        if (selectedItem) {
          selectedItem.style.zIndex = "1";
          selectedItem = null;
        }
      });
    });
  </script>

</body>
</html>
